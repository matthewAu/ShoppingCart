	<!DOCTYPE html>
	<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
		<title>VirtualCart</title>
		<script src="scripts/jquery.min.js"></script>
		<script src="scripts/TweenMax.min.js"></script>
		<link rel="stylesheet" href="css/myCSS.css">
		<link rel="stylesheet" href="css/jquery-ui.css">
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<script src="scripts/jquery-ui.js"></script>
		<script src="scripts/bootstrap.min.js"></script>
		<script type="text/javascript" src="scripts/jquery.ui.touch-punch.js"></script>
		<script src="scripts/qrcode.min.js"></script>
	</head>

	<body oncontextmenu="return false;">
		<div id="parent">
			<p>
				<div onclick="javascript:window.close()" id="btnExit"></div>
				<!-- <button id="btn7">Tween Faces</button><button id="btn8">Rotate Parent</button> -->
				<button hidden="true" id="custom">Create Cube</button>
				<button hidden="true" id="next">Next</button><button hidden="true" id="previous">Previous</button>
				<div id="logo" align="center"><img src="img/logo.png" width="350px" ></div>

			</div>
		</p>

		<div id="border">

			<!-- <div id="slider2"></div> -->
			<div class= rowContainer>
				<div class="row1">
					<div class="cube_container">
						<div id="cube_e" class="r1">
							<div class="box" id="front" >
								<img class="itemImg" src="img/203001.png">
								<img class="itemImg" src="img/203002.png">
								<img class="itemImg" src="img/203003.png">
								<img class="itemImg" src="img/203004.png">
								<img class="itemImg" src="img/203005.png">
							</div>
							<div class="box" id="up">
								<img class="itemImg" src="img/203006.png">
								<img class="itemImg" src="img/203007.png">
								<img class="itemImg" src="img/203008.png">
								<img class="itemImg" src="img/203009.png">
								<img class="itemImg" src="img/203010.png">
							</div>
							<div class="box" id="back">
								<img class="itemImg" src="img/203011.png">
								<img class="itemImg" src="img/203012.png">
								<img class="itemImg" src="img/203013.png">
								<img class="itemImg" src="img/203014.png">
								<img class="itemImg" src="img/203015.png">
							</div>
							<div class="box" id="bottom">
								<img class="itemImg" src="img/203016.png">
								<img class="itemImg" src="img/203017.png">
								<img class="itemImg" src="img/203018.png">
								<img class="itemImg" src="img/203019.png">
								<img class="itemImg" src="img/203020.png">
							</div>
						</div>
					</div>
					<div></div>
				</div>

				<div class="row1">
					<div class="cube_container">
						<div id="cube_e" class="r2">
							<div class="box" id="front">
								<img class="itemImg" src="img/203011.png">
								<img class="itemImg" src="img/203012.png">
								<img class="itemImg" src="img/203013.png">
								<img class="itemImg" src="img/203014.png">
								<img class="itemImg" src="img/203015.png">
							</div>
							<div class="box" id="up">
								<img class="itemImg" src="img/203021.png">
								<img class="itemImg" src="img/203022.png">
								<img class="itemImg" src="img/203023.png">
								<img class="itemImg" src="img/203024.png">
								<img class="itemImg" src="img/203025.png">
							</div>
							<div class="box" id="back">
								<img class="itemImg" src="img/203006.png">
								<img class="itemImg" src="img/203007.png">
								<img class="itemImg" src="img/203008.png">
								<img class="itemImg" src="img/203009.png">
								<img class="itemImg" src="img/203010.png">
							</div>
							<div class="box" id="bottom">
								<img class="itemImg" src="img/203011.png">
								<img class="itemImg" src="img/203012.png">
								<img class="itemImg" src="img/203013.png">
								<img class="itemImg" src="img/203014.png">
								<img class="itemImg" src="img/203015.png">
							</div>
						</div>
					</div>
					<div></div>
				</div>

				<div class="row1">
					<div class="cube_container">
						<div id="cube_e" class="r3">
							<div class="box" id="front">
								<img class="itemImg" src="img/203021.png">
								<img class="itemImg" src="img/203022.png">
								<img class="itemImg" src="img/203023.png">
								<img class="itemImg" src="img/203024.png">
								<img class="itemImg" src="img/203025.png">
							</div>
							<div class="box" id="up">
								<img class="itemImg" src="img/203006.png">
								<img class="itemImg" src="img/203007.png">
								<img class="itemImg" src="img/203008.png">
								<img class="itemImg" src="img/203009.png">
								<img class="itemImg" src="img/203010.png">
							</div>
							<div class="box" id="back">
								<img class="itemImg" src="img/203011.png">
								<img class="itemImg" src="img/203012.png">
								<img class="itemImg" src="img/203013.png">
								<img class="itemImg" src="img/203014.png">
								<img class="itemImg" src="img/203015.png">
							</div>
							<div class="box" id="bottom">
								<img class="itemImg" src="img/203016.png">
								<img class="itemImg" src="img/203017.png">
								<img class="itemImg" src="img/203018.png">
								<img class="itemImg" src="img/203019.png">
								<img class="itemImg" src="img/203020.png">
							</div>
						</div>
					</div>
					<div></div>
				</div>
			</div>

			<div class = paymentBox>
				<div class = "getAmount">
					<table class="table table-striped table-hover">
						<tr>
							<th>Sku</th>
							<th>Desciption</th>
							<th>Qty</th>
							<th>Price</th>
						</tr>
					</table>
				</div>
				<div class ="payContainer">
					<img id="pay" src="img/Shopping.png">
				</div>
			</div>

			<div id="light" class="white_content">
				<div class="showPopUp">
					<a href = "javascript:void(0)" onclick = "document.getElementById('light').style.display='none';">Close</a>
				</div>
				<div id="showQRcode">
				</div>
			</div>

		</div>
	</div>

	<script>
	var supportTouch = $.support.touch,
	scrollEvent = "touchmove scroll",
	touchStartEvent = supportTouch ? "touchstart" : "mousedown",
	touchStopEvent = supportTouch ? "touchend" : "mouseup",
	touchMoveEvent = supportTouch ? "touchmove" : "mousemove";

	$.each({
		swipedown: "swipeupdown",
		swipeup: "swipeupdown"
	}, function(event, sourceEvent){
		$.event.special[event] = {
			setup: function(){
				$(this).bind(sourceEvent, $.noop);
			}
		};
	});

	var firstTime = true ;
	var totalAmount = 0;
	var totalQty = 0;

	var zoomlevel=1;
	$("body").dblclick(function(ev) {
		zoomlevel = zoomlevel == 1 ? 2 : 1;

		$(this).css({
			"-moz-transform":"scale("+zoomlevel+")",
			"-webkit-transform":"scale("+zoomlevel+")",
			"-o-transform":"scale("+zoomlevel+")",
			"-ms-transform":"scale("+zoomlevel+")"
		});


	});

	$(window).keydown(function(event)
	{
		if((event.keyCode == 107 && event.ctrlKey == true) || (event.keyCode == 109 && event.ctrlKey == true))
		{
			event.preventDefault();
		}

		$(window).bind('mousewheel DOMMouseScroll', function(event)
		{
			if(event.ctrlKey == true)
			{
				event.preventDefault();
			}
		});
	});

	var productList = [
	{SKU:"203001", Qty: 0 , Brand: "GARNIER", Description:"Natural Beauty Sampoo", Price:79.9},
	{SKU:"203002", Qty: 0 , Brand: "REVLON", Description:"Color Silk (Caramel)", Price:152.90},
	{SKU:"203003", Qty: 0 , Brand: "Hawaiian Tropic", Description:"Protective Dry Oil Spray", Price:149.90},
	{SKU:"203004", Qty: 0 , Brand: "KERASTASE", Description:"Perfecting Shampoo", Price:89.90},
	{SKU:"203005", Qty: 0 , Brand: "BURT'S BEES", Description:"Baby Bee Lotion", Price:79.90},
	{SKU:"203006", Qty: 0 , Brand: "NARS", Description:"Pure Radiant Moisturizer Broad SPF 30+", Price:420.00},
	{SKU:"203007", Qty: 0 , Brand: "DIOR", Description:"Miss Dior Blooming Bouquet", Price:1060.00},
	{SKU:"203008", Qty: 0 , Brand: "PRADA", Description:"Prada Candy L'EAU 50ml Set", Price:675.00},
	{SKU:"203009", Qty: 0 , Brand: "ATELIER COLOGNE", Description:"Cologne Absolue Silver Iris Set", Price:2880.00},
	{SKU:"203010", Qty: 0 , Brand: "HELENA RUBINSTEIN", Description:"Prodigy Powercell Powercell Youth Grafter", Price:1080.00},
	{SKU:"203011", Qty: 0 , Brand: "FACTORIE", Description:"Plunge Neck Midi Dress", Price:1280.00},
	{SKU:"203012", Qty: 0 , Brand: "SINSIN", Description:"Sleeveless Waterfall Cardigan", Price:980.00},
	{SKU:"203013", Qty: 0 , Brand: "MAYE", Description:"Neat Leather Biker Jacket", Price:3250.00},
	{SKU:"203014", Qty: 0 , Brand: "BOUTIQUE", Description:"Babydool Pinafore Dress", Price:890.00},
	{SKU:"203015", Qty: 0 , Brand: "OVERLAY", Description:"Aztec Print Cape", Price:1299.00},
	{SKU:"203016", Qty: 0 , Brand: "HOGAN", Description:"Print shopping in tumbled leather", Price:1899.00},
	{SKU:"203017", Qty: 0 , Brand: "HOGAN", Description:"Bowler bag in hammered leather", Price:1299.00},
	{SKU:"203018", Qty: 0 , Brand: "HOGAN", Description:"Document holder bag with double zip crafted in leather", Price:2499.00},
	{SKU:"203019", Qty: 0 , Brand: "HOGAN", Description:"Wallet in smooth leather with contrast colour", Price:2499.00},
	{SKU:"203020", Qty: 0 , Brand: "HOGAN", Description:"Affiano leather travel bag with front pocket", Price:3998.00},
	{SKU:"203021", Qty: 0 , Brand: "SOUYHERN STAR", Description:"Cultured Freshwater Pearl & Cubic Zirconia", Price:4390.00},
	{SKU:"203022", Qty: 0 , Brand: "SOUYHERN STAR", Description:"Pendant with 1/10 carat TW of Diamonds", Price:2590.00},
	{SKU:"203023", Qty: 0 , Brand: "MICHAEL HILL", Description:"Engagement Ring with 2 Carat TW of Diamonds", Price:18900.00},
	{SKU:"203024", Qty: 0 , Brand: "MICHAEL HILL", Description:"Earrings with Tanzanite and 1/4 Carat TW of Diamonds", Price:8600.00},
	{SKU:"203025", Qty: 0 , Brand: "DKNY", Description:"Analog Silver Dial Women's Watch", Price:9800.00}
	]

	$(function() {
		$( "#slider2" ).slider({
			orientation: "vertical",
			range:"min",
			value:1,
			step:10,
			min:0,
			max:360,
			slide:function(e,ui){
				console.log(ui.value);
				var tl2 = new TimelineMax({paused:true});
				tl2.to($(".r2"),0.5,{rotationX:ui.value});
				tl2.play(0);
			}
		});

		$('.itemImg').on('dragstart', function(event) { event.preventDefault(); });

		$(".itemImg").click(addToPaymentBox);

		$("#pay").click(generateQRcode);

		console.log($(window).width());
	});

	function addToPaymentBox(){

		var test = $(this).attr('src').split('\/');
		var test2 = test[test.length-1].split('.');

		var photoName = test2[0];

		var product ;

		for(var i = 0; i<productList.length; i++)
		{

			if(productList[i].SKU == photoName)
			{
				product = productList[i];
				productList[i].Qty += 1;
				//alert(product.SKU);
			}
		}

		if(firstTime)
		{
			firstTime = false ;
			totalAmount += product.Price ;
			totalQty += 1;
			$(".table").append("<tr class='normalRow'><td>"+ product.SKU+"</td>\<td>"+ product.Description+"</td><td>1</td><td>"+product.Price+"</td></tr>");
			$(".table").append("<tr id='totalAmount' class='normalRow'><td>Total:</td>\<td></td><td>"+totalQty+"</td><td>"+Math.round(totalAmount * 100) / 100 +"</td></tr>");
		}
		else
		{
			totalAmount += product.Price ;
			totalQty += 1;
			$("#totalAmount").remove();
			$(".table").append("<tr class='normalRow'><td>"+ product.SKU+"</td>\<td>"+ product.Description+"</td><td>1</td><td>"+product.Price+"</td></tr>");
			$(".table").append("<tr id='totalAmount' class='normalRow'><td>Total:</td>\<td></td><td>"+totalQty+"</td><td>"+Math.round(totalAmount * 100) / 100 +"</td></tr>");
		}

		divx = $('.getAmount')[0];
		divx.scrollTop = divx.scrollHeight;
		console.log("scroll bar 's height = " + divx.scrolHeight);
	}

	function generateQRcode(){

		$('#light').css("display", "block");

		$('#showQRcode').empty();
		var string =""
		for(var i = 0; i<productList.length; i++)
		{
			if(productList[i].Qty != 0 )
			{
				string += productList[i].SKU + ",";
				string += productList[i].Description.substring(0,10) + ",";
				string += productList[i].Price + ",";
				string += productList[i].Qty + "|";
			}
		}

		string = string.substring(0, string.length - 1);
		//console.log(string);

		var url =  "pccwdemo.t2ms.com/ReceiptDemo.aspx?item=" + string.replace(/ /g,'+');
		console.log(url);

		new QRCode(document.getElementById("showQRcode"), url);

		$('tr').remove(".normalRow");

		totalAmount = 0 ;
		totalQty = 0 ;

	}

	$.event.special.swipeupdown = {
		setup: function() {
			var thisObject = this;
			var $this = $(thisObject);
			$this.bind(touchStartEvent, function(event) {
				var data = event.originalEvent.touches ?
				event.originalEvent.touches[ 0 ] :
				event,
				start = {
					time: (new Date).getTime(),
					coords: [ data.pageX, data.pageY ],
					origin: $(event.target)
				},
				stop;

				function moveHandler(event) {
					if (!start) {
						return;
					}
					var data = event.originalEvent.touches ?
					event.originalEvent.touches[ 0 ] :
					event;
					stop = {
						time: (new Date).getTime(),
						coords: [ data.pageX, data.pageY ]
					};

	                    // prevent scrolling
	                    if (Math.abs(start.coords[1] - stop.coords[1]) > 10) {
	                    	event.preventDefault();
	                    }
	                }
	                $this
	                .bind(touchMoveEvent, moveHandler)
	                .one(touchStopEvent, function(event) {
	                	$this.unbind(touchMoveEvent, moveHandler);
	                	if (start && stop) {
	                		if (stop.time - start.time < 1000 &&
	                			Math.abs(start.coords[1] - stop.coords[1]) > 30 &&
	                			Math.abs(start.coords[0] - stop.coords[0]) < 75) {
	                			start.origin
	                		.trigger("swipeupdown")
	                		.trigger(start.coords[1] > stop.coords[1] ? "swipeup" : "swipedown");
	                	}
	                }
	                start = stop = undefined;
	            });
	            });
}
};

var r1z=0;
var r2z=0;
var r3z=0;

$('.r1').on('swipedown',function(){
		// alert("swipedown..");
		var tl11 = new TimelineMax({paused:true});
		r1z = Math.round((r1z-90)/90)*90;
		tl11.to($(".r1"),0.5,{rotationX:r1z});
		tl11.play(0);
	});
$('.r1').on('swipeup',function(){
		// alert("swipeup..");
		var tl11 = new TimelineMax({paused:true});
		r1z = Math.round((r1z+90)/90)*90;
		tl11.to($(".r1"),0.5,{rotationX:r1z});
		tl11.play(0);
	});
$('.r2').on('swipedown',function(){
		// alert("swipedown..");
		var tl12 = new TimelineMax({paused:true});
		r2z = Math.round((r2z-90)/90)*90;
		tl12.to($(".r2"),0.5,{rotationX:r2z});
		tl12.play(0);
	});
$('.r2').on('swipeup',function(){
		// alert("swipeup..");
		var tl12 = new TimelineMax({paused:true});
		r2z = Math.round((r2z+90)/90)*90;
		tl12.to($(".r2"),0.5,{rotationX:r2z});
		tl12.play(0);
	});
$('.r3').on('swipedown',function(){
		// alert("swipedown..");
		var tl12 = new TimelineMax({paused:true});
		r3z = Math.round((r3z-90)/90)*90;
		tl12.to($(".r3"),0.5,{rotationX:r3z});
		tl12.play(0);
	});
$('.r3').on('swipeup',function(){
		// alert("swipeup..");
		var tl12 = new TimelineMax({paused:true});
		r3z = Math.round((r3z+90)/90)*90;
		tl12.to($(".r3"),0.5,{rotationX:r3z});
		tl12.play(0);
	});


$(function() {
	$( "#slider" ).slider({
		orientation: "vertical",
		range:"min",
		value:1,
		step:10,
		min:0,
		max:360,
		slide:function(e,ui){
			console.log(ui.value);
			var tl2 = new TimelineMax({paused:true});
			tl2.to($(".r1"),0.5,{rotationX:ui.value});
			tl2.play(0);
		}
	});
});

$("#custom").click(function(){
	var tl1 = new TimelineMax({paused:true});
	var cube_e = $("div#cube_e");
	var front = $("div#front");
	var up = $("div#up");
	var bottom = $("div#bottom");
	var back = $("div#back");
	//TweenMax.set($("div.cube_container"),{perspective:600});
	TweenLite.set(cube_e,{transformStyle:"preserve-3d"});
	tl1
	.to(cube_e,0.5,{z:"-131.5"})
	.to(front,.5,{rotationX:360,z:100.5},"1")
	.to(up,.5,{rotationX:90,y:-131.5},"1")
	.to(back,.5,{rotationX:180,z:-100.5},"1")
	.to(bottom,.5,{rotationX:270,y:131.5},"1");
	tl1.play(0);
	console.log("ENTERED");
});
var deg =0;
$("#next").click(function(){

	deg -=90;
	var tl2 = new TimelineMax({paused:true});
	tl2.to(cube_e,0.5,{rotationX:deg});
	tl2.play(0);
});
$("#previous").click(function(){

	deg +=90;
	var tl2 = new TimelineMax({paused:true});
	tl2.to(cube_e,0.5,{rotationX:deg});
	tl2.play(0);
});
$(document).ready(function(){
	$("#custom").trigger("click");
	$(".box").on("click", function () {
		console.log(this.getAttribute('id'));

	});
})
</script>

</body>
</html>